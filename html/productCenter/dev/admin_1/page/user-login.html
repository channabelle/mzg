<!DOCTYPE html>
<link rel="import" href="../../module-package/global-auth.html?__inline" />
<html lang="en">
    <!--<![endif]-->
    <!-- BEGIN HEAD -->

    <head>
        <title>登录</title>
        <meta charset="utf-8" />
        <link rel="import" href="../../module-package/global-meta.html?__inline" />
        <link rel="import" href="../../module-package/global-css.html?__inline" />

        <!-- BEGIN PAGE LEVEL PLUGINS -->
        <link rel="import" href="../../module-package/page-form-themes.html?__inline" />
        <!-- END PAGE LEVEL PLUGINS -->

        <link rel="import" href="../../module-package/global-theme.html?__inline" />
        <link href="../../assets/pages/css/login-2.css" rel="stylesheet" type="text/css" />
        <link rel="shortcut icon" href="favicon.ico" />
    </head>
    <!-- END HEAD -->

    <body class="login bg-grey-salsa">
        <!-- BEGIN LOGO -->
        <div class="logo">
            <img src="../../assets/layouts/layout/img/myImg/common/logo_full_black.png" />
        </div>
        <!-- END LOGO -->
        <!-- BEGIN LOGIN -->
        <div class="content">
            <!-- BEGIN LOGIN FORM -->
            <form class="login-form" action="index.html" method="post">
                <div class="form-title">
                    <span class="form-title" style="color: #474747">微信小程序管理后台</span>
                    <span class="form-subtitle"></span>
                </div>
                <div class="alert alert-danger display-hide">
                    <button class="close" data-close="alert"></button>
                    <span> Enter any username and password. </span>
                </div>

                <div class="form-group">
                    <div class="input-group" style="display: none;">
                        <div class="icheck-inline">
                            <label>
                                <input type="radio" name="login-type" checked class="icheck" value="0" data-radio="iradio_square-grey">商户登录
                            </label>
                            <label>
                                <input type="radio" name="login-type" class="icheck" value="1" data-radio="iradio_square-grey">管理员登录
                            </label>
                        </div>
                    </div>
                </div>
                <div class="form-group">
                    <!--ie8, ie9 does not support html5 placeholder, so we just show field title for that-->
                    <label class="control-label visible-ie8 visible-ie9">用户名</label>
                    <input class="form-control form-control-solid placeholder-no-fix input-account" type="text" autocomplete="off" placeholder="请输入用户名"
                        name="username" /> </div>
                <div class="form-group">
                    <label class="control-label visible-ie8 visible-ie9">密码</label>
                    <input class="form-control form-control-solid placeholder-no-fix input-pwd" type="password" autocomplete="off" placeholder="请输入密码"
                        name="password" /> </div>
                <div class="form-actions">
                    <button id="login" class="btn red btn-block uppercase">登录</button>
                </div>
                <div class="form-actions">
                    <div class="pull-left">
                        <label class="rememberme mt-checkbox mt-checkbox-outline">
                            <input type="checkbox" name="remember" value="1" /> 记住我
                            <span></span>
                        </label>
                    </div>
                    <div class="pull-right forget-password-block">
                        <a href="javascript:;" id="forget-password" class="forget-password">忘记密码?</a>
                    </div>
                </div>
                <!-- <div class="login-options">
                    <h4 class="pull-left">Or login with</h4>
                    <ul class="social-icons pull-right">
                        <li>
                            <a class="social-icon-color facebook" data-original-title="facebook" href="javascript:;"></a>
                        </li>
                        <li>
                            <a class="social-icon-color twitter" data-original-title="Twitter" href="javascript:;"></a>
                        </li>
                        <li>
                            <a class="social-icon-color googleplus" data-original-title="Goole Plus" href="javascript:;"></a>
                        </li>
                        <li>
                            <a class="social-icon-color linkedin" data-original-title="Linkedin" href="javascript:;"></a>
                        </li>
                    </ul>
                </div> -->
                <!-- <div class="create-account">
                    <p>
                        <a href="javascript:;" class="btn-primary btn" id="register-btn">Create an account</a>
                    </p>
                </div> -->
            </form>
            <!-- END LOGIN FORM -->
            <!-- BEGIN FORGOT PASSWORD FORM -->
            <form class="forget-form" action="index.html" method="post">
                <div class="form-title">
                    <span class="form-title">Forget Password ?</span>
                    <span class="form-subtitle">Enter your e-mail to reset it.</span>
                </div>
                <div class="form-group">
                    <input class="form-control placeholder-no-fix" type="text" autocomplete="off" placeholder="Email" name="email" /> </div>
                <div class="form-actions">
                    <button type="button" id="back-btn" class="btn btn-default">Back</button>
                    <button type="submit" class="btn btn-primary uppercase pull-right">Submit</button>
                </div>
            </form>
            <!-- END FORGOT PASSWORD FORM -->
            <!-- BEGIN REGISTRATION FORM -->
            <form class="register-form" action="index.html" method="post">
                <div class="form-title">
                    <span class="form-title">Sign Up</span>
                </div>
                <p class="hint"> Enter your personal details below: </p>
                <div class="form-group">
                    <label class="control-label visible-ie8 visible-ie9">Full Name</label>
                    <input class="form-control placeholder-no-fix" type="text" placeholder="Full Name" name="fullname" /> </div>
                <div class="form-group">
                    <!--ie8, ie9 does not support html5 placeholder, so we just show field title for that-->
                    <label class="control-label visible-ie8 visible-ie9">Email</label>
                    <input class="form-control placeholder-no-fix" type="text" placeholder="Email" name="email" /> </div>
                <div class="form-group">
                    <label class="control-label visible-ie8 visible-ie9">Address</label>
                    <input class="form-control placeholder-no-fix" type="text" placeholder="Address" name="address" /> </div>
                <div class="form-group">
                    <label class="control-label visible-ie8 visible-ie9">City/Town</label>
                    <input class="form-control placeholder-no-fix" type="text" placeholder="City/Town" name="city" /> </div>
                <div class="form-group">
                    <label class="control-label visible-ie8 visible-ie9">Country</label>
                    <select name="country" class="form-control">
                        <option value="">Country</option>
                        <option value="AF">Afghanistan</option>
                        <option value="AL">Albania</option>
                        <option value="DZ">Algeria</option>
                    </select>
                </div>
                <p class="hint"> Enter your account details below: </p>
                <div class="form-group">
                    <label class="control-label visible-ie8 visible-ie9">Username</label>
                    <input class="form-control placeholder-no-fix" type="text" autocomplete="off" placeholder="Username" name="username" /> </div>
                <div class="form-group">
                    <label class="control-label visible-ie8 visible-ie9">Password</label>
                    <input class="form-control placeholder-no-fix" type="password" autocomplete="off" id="register_password" placeholder="Password"
                        name="password" /> </div>
                <div class="form-group">
                    <label class="control-label visible-ie8 visible-ie9">Re-type Your Password</label>
                    <input class="form-control placeholder-no-fix" type="password" autocomplete="off" placeholder="Re-type Your Password" name="rpassword"
                    /> </div>
                <div class="form-group margin-top-20 margin-bottom-20">
                    <label class="mt-checkbox mt-checkbox-outline">
                        <input type="checkbox" name="remember" value="1" />
                        <input type="checkbox" name="tnc" /> I agree to the
                        <a href="javascript:;">Terms of Service </a> &
                        <a href="javascript:;">Privacy Policy </a>
                        <span></span>
                    </label>
                    <div id="register_tnc_error"> </div>
                </div>
                <div class="form-actions">
                    <button type="button" id="register-back-btn" class="btn btn-default">Back</button>
                    <button type="submit" id="register-submit-btn" class="btn red uppercase pull-right">Submit</button>
                </div>
            </form>
            <!-- END REGISTRATION FORM -->
        </div>
        <div class="copyright hide"> 2014 © Metronic. Admin Dashboard Template. </div>
        <!-- END CONTAINER -->
        <link rel="import" href="../../module-package/page-footer.html?__inline" />
        <link rel="import" href="../../module-package/global-core-js.html?__inline" />
        <!-- BEGIN PAGE LEVEL PLUGINS -->
        <link rel="import" href="../../module-package/page-form-plugins.html?__inline" />
        <!-- END PAGE LEVEL PLUGINS -->

        <!-- BEGIN THEME GLOBAL SCRIPTS -->
        <link rel="import" href="../../module-package/global-theme-js.html?__inline" />
        <!-- END THEME GLOBAL SCRIPTS -->

        <!-- BEGIN PAGE LEVEL SCRIPTS -->
        <link rel="import" href="../../module-package/page-form-scripts.html?__inline" />
        <!-- END PAGE LEVEL SCRIPTS -->

        <!-- BEGIN THEME LAYOUT SCRIPTS -->
        <link rel="import" href="../../module-package/global-theme-layout-js.html?__inline" />
        <!-- END THEME LAYOUT SCRIPTS -->

        <link rel="import" href="../../module-package/global-my-js.html?__inline" />
        <script>
            $(function () {
                $('#login').click(function (e) {
                    console.log('#login click');

                    var _returnUrl = REG_EXP.getURLParam('returnUrl')
                    console.log('returnUrl: ' + _returnUrl);

                    var _loginType = $("input[name='login-type']:checked").val();
                    var _loginUrl = (0 == _loginType) ? "/shopManager/login" : "/administrator/login";
                    AJAX.post(
                        url = _loginUrl,
                        data = {
                            "account": $('.input-account').val(),
                            "password": $('.input-pwd').val()
                        },
                        successCb = function (data) {
                            if (data) {
                                if (2000 == data.status) {
                                    toastr.success(data.message.content, data.message.title);

                                    MY_CONFIG.setCookie('shopManager', JSON.stringify(data.data), 24 * 3600);

                                    if (_returnUrl) {
                                        ROUTER.goAbsPath(_returnUrl);
                                    } else {
                                        ROUTER.go('/blank.html');
                                    }
                                } else if (2001 == data.status && data.message) {
                                    toastr.error(data.message.content, data.message.title);
                                }
                            }
                        },
                        alwaysCb = null,
                        formValid = $(this).parents('form'),
                        isBlockUI = true,
                        animateSubmit = false);

                    return false;
                });
            });
        </script>
    </body>

</html>